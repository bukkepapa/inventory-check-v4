# 在庫引当チェックツール | Smart Allocation

PandasとStreamlitを使用した洗練された在庫引当チェックアプリケーションです。最新の倉庫在庫データと1つ以上の受注ファイルを瞬時に照合し、業務効率を最大化します。

## 主な機能

- **マルチファイル・アップロード**: 複数の受注ファイルを一括で読み込み、自動で結合して引当を計算。
- **インテリジェントな在庫計算**: `倉庫在庫数 + (入庫予定 × 入数)` を自動計算し、実質的な引き当て可能数を算出。
- **モダンでエレガントなUI**: 業務利用者が直感的に操作できる、洗練されたデザイン。
- **Shift-JIS/UTF-8自動判別**: 多彩なエンコーディングの受注ファイルに対応。
- **特定商品自動除外**: システム仕様に基づき、商品コード `30126` を自動的に除外。

## 必要要件

- Python 3.10以上
- 必要なライブラリは `requirements.txt` に記載

## インストール

```powershell
# 依存ライブラリのインストール
pip install -r requirements.txt
```

## 使用方法

### アプリケーションの起動

```powershell
streamlit run app.py
```

### ファイル形式の要件

#### ① 速報倉庫在庫ファイル (.xlsx, .csv)
- **保管場所**: `A309001` が対象となります。
- **必要な列**: 商品コード, 入数, 倉庫在庫数, 入庫予定

#### ② 受注ファイル (.txt)
- **形式**: タブ区切り（TSV）
- **文字コード**: UTF-8 / UTF-8 with BOM / Shift-JIS（自動判別）
- **複数選択**: 複数のファイルを同時にアップロードできます。

### 操作手順

1. **ファイルのアップロード**
   - 「速報倉庫在庫ファイル」と1つ以上の「受注ファイル」を選択します。
2. **不足確認の実行**
   - 「🔍 不足確認」ボタンをクリックします。
3. **結果の確認**
   - **在庫充足**: 全商品の在庫が確保できている場合、祝福のアニメーションが表示されます。
   - **不足状況**: 在庫が不足している場合、該当商品と注文顧客のリストが詳細に表示されます。

## 技術スタック

- **Python**: 3.10+
- **Streamlit**: Webアプリケーションフレームワーク
- **Pandas**: データ解析エンジン

## 注意事項

- 受注ファイル内で同一商品が複数のファイルに存在する場合、自動的に合算されます。
- 商品コードの先頭ゼロは、突合精度を上げるために自動的にトリミングされます。
